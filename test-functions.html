<!DOCTYPE html>
<html>
<head>
  <title>Test Supabase Functions</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
    .test { margin: 10px 0; padding: 10px; border: 1px solid #333; border-radius: 4px; }
    .success { background: #1a3a1a; border-color: #2a5a2a; }
    .error { background: #3a1a1a; border-color: #5a2a2a; }
    .pending { background: #2a2a1a; border-color: #4a4a2a; }
    button { padding: 8px 16px; margin: 5px; cursor: pointer; }
    pre { background: #0a0a0a; padding: 10px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>üß™ Supabase Functions Test</h1>
  <p>Project: zzvkbxdaayhbytcshwrs</p>
  
  <div id="results"></div>
  
  <script type="module">
    const SUPABASE_URL = 'https://zzvkbxdaayhbytcshwrs.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp6dmtieGRhYXloYnl0Y3Nod3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2NjMyNjQsImV4cCI6MjA4NzIzOTI2NH0.YLHhwr2IjPDowG2gb4V-bGbHSnl2AScCVHCmuiE2l9o';
    
    const functions = [
      'create-wallet',
      'import-wallet', 
      'send-payment',
      'create-escrow',
      'release-escrow',
      'send-pool-invitation'
    ];
    
    const results = document.getElementById('results');
    
    async function testFunction(name) {
      const div = document.createElement('div');
      div.className = 'test pending';
      div.innerHTML = `<strong>${name}</strong>: Testing...`;
      results.appendChild(div);
      
      try {
        const response = await fetch(`${SUPABASE_URL}/functions/v1/${name}`, {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${SUPABASE_KEY}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({})
        });
        
        const data = await response.text();
        
        if (response.ok) {
          div.className = 'test success';
          div.innerHTML = `
            <strong>‚úÖ ${name}</strong>: Deployed and responding
            <pre>${data}</pre>
          `;
        } else {
          div.className = 'test error';
          div.innerHTML = `
            <strong>‚ùå ${name}</strong>: Status ${response.status}
            <pre>${data}</pre>
          `;
        }
      } catch (error) {
        div.className = 'test error';
        div.innerHTML = `
          <strong>‚ùå ${name}</strong>: Not deployed or network error
          <pre>${error.message}</pre>
        `;
      }
    }
    
    // Test all functions
    for (const fn of functions) {
      await testFunction(fn);
    }
  </script>
</body>
</html>
